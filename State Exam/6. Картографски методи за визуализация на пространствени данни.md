# Картографски методи за визуализация на пространствени данни

## От Семантиката на графиката до интерактивни уеб‑карти

---

### 1. Въведение

Картографската визуализация е **превод** на пространствени данни в разбираеми образи. Тя е същинският „език“ на геоинформатиката: без адекватно картографиране аналитичните резултати остават неубедителни. Целта на тази тема е да систематизира класическите и съвременни методи за изобразяване, както и да посочи добрите практики за дизайн и комуникация.

> **Ключова идея:** *Визуалният избор (символ → цвят → композиция) трябва да следва природата на данните (скала на измерване) и целевата аудитория.*

---

### 2. Теоретични основи

#### 2.1 Семиология на графиката (Bertin, 1967)

* **Визуални променливи:** позиция, размер, форма, ориентация, стойност, цвят (hue), текстура, прозрачност.
* **Възприемчивост:** някои променливи са по‑подходящи за количествени (размер, стойност), други за качествени атрибути (форма, цвят).

#### 2.2 Типове данни и подходящи техники (според Kraak & Ormeling, 2020)

| Скала             | Символ                    | Пример                                 |
| ----------------- | ------------------------- | -------------------------------------- |
| Номинална         | категорийни цветове (hue) | тип земно покритие                     |
| Ординална         | градация (value)          | ерозионен риск: нисък / среден / висок |
| Интервална        | изолинии                  | температурни изотерми                  |
| Отношение (ratio) | пропорционални символи    | население по градове                   |

---

### 3. Класически тематични методи

#### 3.1 Точкови (Dot) карти

* Представят **плътност**: всяка точка = n явления (напр. 1 точка = 100 души).
* **Предимство:** визуално интуитивни за разпределения.
* **Недостатък:** неточни при малки полигони.

#### 3.2 Пропорционални и градуирани символи

* **Пропорционални**: площ/диаметър на символа e в линейна зависимост от величината.
* **Градуирани**: интервално разделени величини; по‑лесни за интерпретация, но губят част от точността.

#### 3.3 Картодиаграми (Chart maps)

* Вградени диаграми (pie/bar) върху местоположение.
* Позволяват **мултивариативност**, но страдат при прекомерно застъпване.

#### 3.4 Хороплетни карти (Choropleths)

* Използват **затворени полигони** с цветовa запълване.
* **Нормализиране** (ratio per area/unit) задължително за коректност.
* **Класификация**: natural breaks, quantiles, equal interval, standart deviation.

#### 3.5 Дасиметрично картографиране

* Подобрява хороплетната карта чрез **допълнителен слой** (например земно покритие) за преразпределяне на стойностите.
* Намалява **MAUP** (Modifiable Areal Unit Problem).

#### 3.6 Изолинии (Isarithmic) и хипсометрично оцветяване

* Контурни линии за непрекъснати полета (височина, концентрация).
* **Hypsometric tint** + **hillshade** = четлива релефна визуализация.

#### 3.7 Диаграмни и картограмни методи

* **Cartograms** трансформират геометрията по величина (Dorling, contiguous).
* **Flow maps** показват движение (миграция, транспорт), използват **ширина** на линията за величина.

---

### 4. Съвременни и многомерни техники

#### 4.1 Бивариантни/мултивариантни хороплети

* Комбинират две величини чрез матрица цвят‑наситеност (Brewer, 2015).
* Подходящи за корелации (напр. доходи vs образованост).

#### 4.2 Картографска анимация

* **Temporal sliders** (time series), **tweening** между кадри.
* Пример: еволюция на COVID‑19 случаи (Chang, 2021).

#### 4.3 3D и 4D визуализации

* **Prism maps**, **extruded buildings** (height = value).
* **4D**: добавяне на време към 3D сцени (CityEngine, Cesium).
* **AR/VR**: HoloLens полеви приложения.

#### 4.4 Kernel density / Heatmaps

* Гладки повърхности за събитийни точки.
* Параметър **bandwidth** влияе на детайла → Silverman rule.

---

### 5. Уеб и интерактивни карти

| Технология             | Характеристика                     | Пример                               |
| ---------------------- | ---------------------------------- | ------------------------------------ |
| **Slippy tiles (XYZ)** | растер; мащабируемо CDN            | OpenStreetMap base                   |
| **Vector tiles (MVT)** | динамична стилизация; малък размер | Mapbox GL, ArcGIS Vector Tiles       |
| **WebGL**              | GPU; 100k+ точки в браузър         | Deck.gl, Kepler.gl                   |
| **Dashboards**         | real‑time feeds                    | ArcGIS Dashboards, Grafana + Leaflet |

* **Story maps** (ESRI, KnightLab) – нарратив + карта; повишава ангажираността.

---

### 6. Дизайн и добри практики

#### 6.1 Цветови избор

* **ColorBrewer 2.0** – sequential, diverging, qualitative палитри.
* Избягвай *rainbow* scale → perceptual nonlinearity.
* Проверка за **color‑blind safety** (deuteranopia).

#### 6.2 Генерализация и йерархия

* **Selection, simplification, smoothing, aggregation** – зависими от мащаба.
* **Визуална йерархия**: фонови слоеве с нисък контраст, тематичен слой – висок.

#### 6.3 Лейаут и типография

* **Заглавие → легенда → източник** – класически Z‑образен поток.
* Sans‑serif шрифтове за уеб, serif за печат; минимален кегел 6 pt.

---

### 7. Практически работен поток (QGIS + Leaflet)

1. **Data:** NO₂ концентрация (rasters, µg/m³) + населена плътност (vector, persons/km²) за София.
2. **Preprocess:** GDAL → resample NO₂ до 100 m; join density polygons.
3. **Visualization in QGIS:**

   * Bivariate choropleth (matrix 3×3) via *qgis‑bivariate‑renderer* plugin.
   * Hillshade overlay at 50 % opacity.
4. **Export vector tiles** via *qgis2tiles* (MVT); host on GitHub Pages.
5. **Leaflet app:** dynamic legend toggle, time slider for 2019‑2024 seasons.
6. **Outcome:** interactive map \~8 MB, load time < 2 s.

---

### 8. Чести грешки и как да ги избегнем

| Грешка                             | Симптом                                     | Решение                      |
| ---------------------------------- | ------------------------------------------- | ---------------------------- |
| Не‑нормализирани хороплети         | Гъсто населени области изглеждат „по‑важни“ | Делете на площ / население   |
| Прекалено много класове            | Легенда неразбираема                        | 5‑7 класа максимум (Tufte)   |
| „Последният милитаризиран радиант“ | Неподдържани цветове при печат              | CMYK proof & Pantone избор   |
| Избликващ хълмконтур               | Hillshade твърде тъмен                      | Gamma=1.4 и 40 % прозрачност |

---

### 9. Съвременни тенденции

1. **Semantic zoom** – символи и данни се сменят контекстуално (Mapbox style > 12).
2. **Data‑driven styling** – изчисления в браузъра (expressions in MapLibre GL).
3. **Edge rendering** – WebGPU + WASM: милиони обекти client‑side.
4. **Explainable GeoAI** – heatmaps на attention слоеве при DL модели.
5. **Participatory mapping** – crowdsourced updates в реално време (HOT‑OSM Field Papers).

---

### 10. Заключение

Картографската визуализация се развива от статични печатни карти до облачни, интерактивни и дори 4‑D среди. **Разбирането на методите** (символика, цветове, общо‑геометрични трансформации) и **вниманието към дизайн** гарантират, че картата изпълнява основната си функция – да комуникира пространствената информация ясно, точно и естетично.

---

### Използвани източници

1. Kraak, M.‑J., & Ormeling, F. (2020). *Cartography: Visualization of Geospatial Data* (4th ed.). CRC Press.
2. Saraфова, М. (2024). *Картография*. ISBN 978‑619‑91426‑6‑0.
3. Brewer, C. A. (2015). *Designing Better Maps: A Guide for GIS Users* (2nd ed.). ESRI Press.
4. Popov, A., & Kotsev, A. (2011). *ГИС и интернет*. София.
5. Tufte, E. R. (2001). *The Visual Display of Quantitative Information* (2nd ed.). Graphics Press.
6. Chang, K. (2018). *Introduction to Geographic Information Systems* (9th ed.). McGraw‑Hill.
